#!/usr/bin/env bash
set -euo pipefail

usage() {
  cat <<EOF
Usage: aws-secretctl <command> [options]

Manage AWS Secrets Manager secrets.

Commands:
  list      List all secrets
  select    Select a secret interactively
  get       Get secret value
  edit      Edit a secret with vipe
  delete    Delete a secret

Run 'aws-secretctl <command> --help' for more information on a command.

Examples:
  aws-secretctl list
  aws-secretctl get my-secret
  aws-secretctl edit my-secret
  aws-secretctl delete my-secret --force
EOF
}

if [[ $# -eq 0 ]]; then
  usage
  exit 1
fi

subcommand="$1"
shift

case "$subcommand" in
-h | --help)
  usage
  exit 0
  ;;
esac

exec "aws-secretctl-$subcommand" "$@"
