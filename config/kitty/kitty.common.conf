# https://sw.kovidgoyal.net/kitty/conf.html
env read_from_shell=PATH LANG LC_* XDG_* EDITOR VISUAL

font_family Victor Mono
font_size 12

background_opacity 1.0

disable_ligatures cursor
cursor_shape block
cursor_shape_unfocused hollow
cursor_underline_thickness 1
cursor_trail 0
cursor_trail_start_threshold 50
cursor_trail_decay 0.1 0.4
cursor_trail_color #5B6268

scrollbar scrolled

dim_opacity 0.3
dynamic_background_opacity yes
hide_window_decorations titlebar-only
inactive_text_alpha 0.68
single_window_margin_width -1
single_window_padding_width -1
window_border_width 0.5pt
window_margin_width 0
window_padding_width 0
window_resize_step_cells 2
window_resize_step_lines 2

active_tab_font_style bold
inactive_tab_font_style none
tab_activity_symbol "âº"
bell_on_tab ""
tab_bar_align left
tab_bar_background none
tab_bar_edge bottom
tab_bar_margin_height 0.0 0.0
tab_bar_margin_width 10
tab_bar_min_tabs 1
# tab_bar_style powerline
tab_bar_style separator
tab_separator "    "
# tab_powerline_style slanted
tab_switch_strategy previous
tab_title_max_length 0
# tab_title_template "  {fmt.fg._888}{activity_symbol}{index}:{fmt.fg._bbb}{'/'.join(tab.active_wd.rsplit('/')[-2:])}  "
# active_tab_title_template "  {activity_symbol}{index}:{fmt.fg.tab}{'/'.join(tab.active_wd.rsplit('/')[-2:])}  "
tab_title_template "  {fmt.fg._888}{activity_symbol}{index}:{fmt.fg._bbb}{title}  "
active_tab_title_template "  {activity_symbol}{index}:{fmt.fg.tab}{title}  "

shell_integration enabled
allow_remote_control socket-only
listen_on unix:kitty-socket.{kitty_pid}

notify_on_cmd_finish invisible 15

allow_hyperlinks yes
detect_urls yes
open_url_with default
url_prefixes http https file ftp gemini irc gopher mailto news git at postgres clickhouse mysql
url_style curly

scrollback_lines 16384
scrollback_pager_history_size 4096

enabled_layouts tall:bias=66,fat:bias=66,grid,horizontal,splits,stack,vertical

kitten_alias hints hints --hints-offset=0 --alphabet=abcdefghijklmnopqrstuvwxyz
action_alias launch_tab launch --cwd=current --type=tab --location=after

clear_all_shortcuts yes

map ctrl+tab next_tab
map ctrl+shift+tab previous_tab

# map kitty_mod+0 # TODO
# map kitty_mod+1 # TODO
# map kitty_mod+2 # TODO
# map kitty_mod+3 # TODO
# map kitty_mod+4 # TODO
# map kitty_mod+5 # TODO
# map kitty_mod+6 # TODO
# map kitty_mod+7 # TODO
map kitty_mod+8 kitten edit_marks.py
# map kitty_mod+9 # TODO
map kitty_mod+a>1 set_background_opacity 1
map kitty_mod+a>d set_background_opacity default
map kitty_mod+a>l set_background_opacity -0.1
map kitty_mod+a>m set_background_opacity +0.1
map kitty_mod+alt+d detach_tab ask
map kitty_mod+c copy_to_clipboard
map kitty_mod+d detach_window ask
map kitty_mod+delete clear_terminal reset active
map kitty_mod+e open_url_with_hints
map kitty_mod+enter new_window_with_cwd
map kitty_mod+escape kitten kitty_grab/grab.py
map kitty_mod+f kitten hints --type path --program -
map kitty_mod+g show_last_command_output
map kitty_mod+h neighboring_window left
map kitty_mod+j neighboring_window down
map kitty_mod+k neighboring_window up
map kitty_mod+l neighboring_window right
map kitty_mod+m toggle_layout stack
map kitty_mod+o>e kitten hints --program default --type hyperlink
map kitty_mod+o>f kitten hints --program default --type path
map kitty_mod+o>h kitten hints --program default --type hash
map kitty_mod+o>i kitten hints --program default --type path
map kitty_mod+o>l kitten hints --program default --type line
map kitty_mod+o>n kitten hints --program default --type linenum
map kitty_mod+o>w kitten hints --program default --type word
map kitty_mod+p>e kitten hints --program - --type hyperlink
map kitty_mod+p>f kitten hints --program - --type path
map kitty_mod+p>h kitten hints --program - --type hash
map kitty_mod+p>i kitten hints --program - --type ip
map kitty_mod+p>l kitten hints --program - --type line
map kitty_mod+p>n kitten hints --program - --type linenum
map kitty_mod+p>u kitten unicode_input
map kitty_mod+p>w kitten hints --type word --program -
map kitty_mod+q close_window
map kitty_mod+r start_resizing_window
map kitty_mod+t launch_tab
# map kitty_mod+u kitten quick-access-terminal
#     \ --instance-group=claude
#     \ -o app_id=kitty-quick-access-claude
#     \ -o edge=right
#     \ -o columns=140
#     \ -o background_opacity=0.97
#     \ -o hide_on_focus_lost=yes
#     \ -o confirm_os_window_close=yes
#     \ -o allow_remote_control=socket-only
#     \ -o listen_on="${XDG_DATA_DIR:-$HOME/.local/share}/kitty/quick-access-claude.sock"
#     \ claude
map kitty_mod+v paste_selection_or_clipboard
map kitty_mod+w>1 first_window
map kitty_mod+w>2 second_window
map kitty_mod+w>3 third_window
map kitty_mod+w>4 fourth_window
map kitty_mod+w>5 fith_window
map kitty_mod+w>6 sixth_window
map kitty_mod+w>7 seventh_window
map kitty_mod+w>8 eighth_window
map kitty_mod+w>9 ninth_window
map kitty_mod+w>b move_window_backward
map kitty_mod+w>d detach_window ask
map kitty_mod+w>f move_window_forward
map kitty_mod+w>h move_window left
map kitty_mod+w>j move_window bottom
map kitty_mod+w>k close_window
map kitty_mod+w>k move_window top
map kitty_mod+w>l move_window right
map kitty_mod+w>shift+o close_other_windows_in_tab
map kitty_mod+x scroll_to_prompt 1
map kitty_mod+y>a combine : launch --stdin-source=@scrollback --type=clipboard : kitten notify "Copied scrolback"
map kitty_mod+y>e kitten hints --type hyperlink --program @
map kitty_mod+y>f kitten hints --type path --program @
map kitty_mod+y>h kitten hints --type hash --program @
map kitty_mod+y>i kitten hints --type ip --program @
map kitty_mod+y>l kitten hints --type line --program @
map kitty_mod+y>n kitten hints --type linenum --program @
map kitty_mod+y>o combine : launch --stdin-source=@last_cmd_output --type=clipboard : kitten notify "Copied last command output"
map kitty_mod+y>s combine : launch --stdin-source=@screen --type=clipboard : kitten notify "Copied screen"
map kitty_mod+y>w kitten hints --type word --program @
map kitty_mod+y>y combine : launch --stdin-source=@selection --type=clipboard : kitten notify "Copied selection"
map kitty_mod+z scroll_to_prompt -1 2

map kitty_mod+[ previous_window
map kitty_mod+] next_window
map kitty_mod+, move_tab_backward
map kitty_mod+. move_tab_forward
map kitty_mod+; combine : toggle_layout stack : nth_window -1
map kitty_mod+` goto_tab -1
map kitty_mod+\>\ next_layout
map kitty_mod+\>kitty_mod+\ next_layout
map kitty_mod+\>f goto_layout fat
map kitty_mod+\>g goto_layout grid
map kitty_mod+\>h goto_layout horizontal
map kitty_mod+\>k goto_layout stack
map kitty_mod+\>r layout_action rotate
map kitty_mod+\>s goto_layout splits
map kitty_mod+\>shift+h layout_action move_window_to_screen_edge left
map kitty_mod+\>shift+j layout_action move_window_to_screen_edge bottom
map kitty_mod+\>shift+k layout_action move_window_to_screen_edge top
map kitty_mod+\>shift+l layout_action move_window_to_screen_edge right
map kitty_mod+\>t goto_layout tall
map kitty_mod+\>tab next_layout
map kitty_mod+\>v goto_layout vertical

map kitty_mod+space>1 goto_session a.kitty-session
map kitty_mod+space>2 goto_session b.kitty-session
map kitty_mod+space>3 goto_session c.kitty-session
map kitty_mod+space>b launch --allow-remote-control kitty +kitten broadcast --match-tab state:focused
map kitty_mod+space>h>a show_kitty_doc actions
map kitty_mod+space>h>e show_kitty_doc kittens_intro
map kitty_mod+space>h>h show_kitty_doc overview
map kitty_mod+space>h>k show_kitty_doc mapping
map kitty_mod+space>h>l show_kitty_doc layouts
map kitty_mod+space>h>m show_kitty_doc marks
map kitty_mod+space>h>r show_kitty_doc generated/rc
map kitty_mod+space>j       launch --type=overlay --copy-env --cwd=current just --choose
map kitty_mod+space>m       launch --type=overlay --copy-env --cwd=current mise run
map kitty_mod+space>shift+S launch --type=overlay --copy-env --cwd=current just --justfile $HOME/.dotfiles/justfile switch
map kitty_mod+space>shift+j launch --type=overlay --copy-env --cwd=current just --justfile $HOME/.dotfiles/justfile --choose
map kitty_mod+space>tab goto_session
map kitty_mod+space>y>y combine : launch --stdin-source=@selection --type=clipboard : kitten notify "Copied selection"
map kitty_mod+space>y>o combine : launch --stdin-source=@last_cmd_output --type=clipboard : kitten notify "Copied last command output"
map kitty_mod+space>y>s combine : launch --stdin-source=@screen --type=clipboard : kitten notify "Copied screen"
map kitty_mod+space>y>a combine : launch --stdin-source=@scrollback --type=clipboard : kitten notify "Copied scrolback"
map kitty_mod+space>v kitten kitty_grab/grab.py

map kitty_mod+left  resize_window wider 4
map kitty_mod+down  resize_window shorter 2
map kitty_mod+up    resize_window taller 2
map kitty_mod+right resize_window narrower 4

map kitty_mod+backspace change_font_size all 0
map kitty_mod+equal     change_font_size all +2.0
map kitty_mod+minus     change_font_size all -2.0

map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9
map cmd+h no_op
map cmd+j no_op
map cmd+k no_op
map cmd+l clear_terminal last_command active
map cmd+l no_op
map cmd+n new_os_window_with_cwd
map cmd+shift+i kitty_shell window
map cmd+shift+d debug_config
map cmd+shift+e combine : launch --type=overlay kitten edit-in-kitty ~/.config/kitty/local.conf : load_config_file
map cmd+shift+i debug_config
map cmd+shift+l dump_lines_with_attrs
map cmd+shift+r load_config_file
map cmd+shift+t kitten themes
map cmd+shift+w close_os_window
map cmd+w close_window

map cmd+left scroll_prompt_to_top
map cmd+down scroll_to_prompt 1
map cmd+up scroll_to_prompt -1 2
map cmd+right scroll_prompt_to_bottom

# map cmd+enter new_window_with_cwd
map cmd+. set_tab_title
map cmd+shift+[ previous_tab
map cmd+shift+] next_tab

map shift+up        kitten smart_scroll.py scroll_line_up   shift+up
map shift+down      kitten smart_scroll.py scroll_line_down shift+down
map shift+page_up   kitten smart_scroll.py scroll_page_up   shift+page_up
map shift+page_down kitten smart_scroll.py scroll_page_down shift+page_down
map ctrl+shift+home kitten smart_scroll.py scroll_home      ctrl+shift+home
map ctrl+shift+end  kitten smart_scroll.py scroll_end       ctrl+shift+end

mouse_map ctrl+alt+left       press       ungrabbed         mouse_selection   rectangle
mouse_map ctrl+alt+left       triplepress ungrabbed         mouse_selection   line_from_point
mouse_map ctrl+shift+left     press       grabbed           discard_event
mouse_map ctrl+shift+left     release     grabbed,ungrabbed mouse_click_url
mouse_map left                            click             ungrabbed         mouse_click_url_or_select
mouse_map left                            doublepress       ungrabbed         mouse_selection word
mouse_map left                            press             ungrabbed         mouse_selection normal
mouse_map left                            triplepress       ungrabbed         mouse_selection line
mouse_map middle                          release           ungrabbed         paste_from_selection
mouse_map right               press       ungrabbed         mouse_select_command_output
mouse_map shift+ctrl+alt+left press       ungrabbed,grabbed mouse_selection   rectangle
mouse_map shift+ctrl+alt+left triplepress ungrabbed,grabbed mouse_selection   line_from_point
mouse_map shift+left                      doublepress       ungrabbed,grabbed mouse_selection word
mouse_map shift+left                      press             ungrabbed,grabbed mouse_selection normal
mouse_map shift+left                      triplepress       ungrabbed,grabbed mouse_selection line
mouse_map shift+left                      click             grabbed,ungrabbed mouse_click_url_or_select
mouse_map shift+middle                    release           ungrabbed,grabbed paste_selection
mouse_map shift+right         press       ungrabbed,grabbed mouse_selection   extend

include current-theme.conf

draw_minimal_borders no
active_border_color #6272a4
inactive_border_color #44475a
active_tab_background #bd93f9
active_tab_foreground #21222c
inactive_tab_background #282a36
inactive_tab_foreground #f8f8f2
