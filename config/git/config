# -*- mode: gitconfig; -*-
# vim: set filetype=gitconfig:

[core]
	autocrlf     = input
	pager        = delta
	excludesFile = ~/.config/git/ignore
	autocrlf     = false

[user]
	name       = Logan Linn
	email      = logan@llinn.dev

[github]
  user = loganlinn

[init]
	defaultBranch = main
	templatedir   = ~/.config/git/template

[commit]
	gpgsign = true

[color]
	ui = auto

[pager]
	diff   = delta
	log    = delta
	reflog = delta
	show   = delta

[interactive]
	diffFilter = delta --color-only --features=interactive

[diff]
	wsErrorHighlight = all
	colorMoved       = zebra
	tool             = meld

[difftool]
	prompt = false

[difftool "meld"]
	cmd = meld "$LOCAL" "$REMOTE"

[apply]
	whitespace = nowarn

[help]
	autocorrect = 1

[advice]
	detachedHead = false
	statusHints  = false

[fetch]
	prune            = true
	writeCommitGraph = true

[push]
	default = current

[pull]
	rebase = true

[merge]
	ff = only

[rebase]
	autosquash = true
	autostash  = false # fool me once, ...

[filter "lfs"]
	clean    = git-lfs clean -- %f
	smudge   = git-lfs smudge -- %f
	process  = git-lfs filter-process
	required = true

[credential "https://github.com"]
	helper = !gh auth git-credential

[include]
	path = ~/.config/git/alias

[alias]
	wt = worktree
  lswt = worktree list
  mkwt = "!f() { git worktree add \"$(git rev-parse --show-toplevel)+$@\"; }; f"
  rmwt = "!f() { git worktree remove \"$(git rev-parse --show-toplevel)+$@\"; }; f"

  edit-config = config --global --edit

	aliases = config --get-regexp alias

	unmerged = branch --no-merged master

	rank    = shortlog -sn --no-merges
	authors = "!f() { git log --no-merges --pretty='format:%<(26)%an <%ae>' --author \"$*\" | sort | uniq; }; f"

  #upstream        = !git for-each-ref --format='%(upstream:short)' $(git symbolic-ref -q HEAD)
  #upstream-remote = !git upstream | sed -e 's/\\/.*$//g'

	stash-grep = "!f() { git show $(git stash list | cut -d\":\" -f 1) | grep \"$@\" ; }; f"

	fzfixup  = "!f() { git log --pretty=oneline -n 100 | fzf | awk '{ print $1 }' | xargs git fixup ; }; f"

[include]
	path = ~/.config/git/config.local
